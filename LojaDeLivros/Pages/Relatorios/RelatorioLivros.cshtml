@page
@model LojaDeLivros.Pages.Relatorios.RelatorioLivrosModel
@{
    ViewData["Title"] = "Relatório de Livros";
}

<link rel="stylesheet" type="text/css" href="~/lib/datatables.net-dt/css/jquery.dataTables.min.css">
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>

<h2>@ViewData["Title"]</h2>

<table id="livrosTable" class="display" style="width:100%">
    <thead>
        <tr>
            <th>Autor</th>
            <th>Código</th>
            <th>Título</th>
            <th>Editora</th>
            <th>Edição</th>
            <th>Valor</th>
            <th>Assunto</th>
            <th>Ano de Publicação</th>
        </tr>
    </thead>
</table>

@section scripts {
    <script src="https://cdn.datatables.net/rowgroup/1.1.3/js/dataTables.rowGroup.min.js"></script>

    <script>
        $(document).ready(function () {
            var table = $('#livrosTable').DataTable({
                ajax: {
                    url: '/RelatorioLivros/GetLivrosData',
                    dataSrc: ''
                },
                columns: [
                    { data: 'Nome' },
                    { data: 'Codl' },
                    { data: 'Titulo' },
                    { data: 'Editora' },
                    { data: 'Edicao' },
                    { data: 'Valor' },
                    { data: 'Descricao' },
                    { data: 'AnoPublicacao' }
                ],
                order: [[0, 'asc']], // Ordenar por autor
                rowGroup: {
                    dataSrc: 'Nome' // Agrupar por autor
                }
            });
        });
    </script>
}